---
layout: default
title: Documentation <span>1.13.0</span>
---

<div class="sidebar"></div>
<h1 class="file-heading">File: src/engine/storage.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
    @module storage
    @namespace game
**/
game.module(
    &#x27;engine.storage&#x27;
)
.body(function() {
&#x27;use strict&#x27;;

/**
    Local storage.
    @class Storage
    @extends game.Class
**/
game.createClass(&#x27;Storage&#x27;, {
    init: function(id) {
        this.id = id || game.Storage.id;
        this.supported = this.isSupported();
    },

    isSupported: function() {
        if (typeof localStorage !== &#x27;object&#x27;) return false;
        try {
            localStorage.setItem(&#x27;localStorage&#x27;, 1);
            localStorage.removeItem(&#x27;localStorage&#x27;);
        }
        catch (e) {
            return false;
        }
        return true;
    },

    /**
        Set value to local storage.
        @method set
        @param {String} key
        @param {*} value
    **/
    set: function(key, value) {
        if (!this.supported) return false;
        localStorage.setItem(this.id + &#x27;.&#x27; + key, this.encode(value));
    },

    /**
        Get key from local storage.
        @method get
        @param {String} key
        @param {*} [defaultValue]
        @return {*} value
    **/
    get: function(key, defaultValue) {
        var raw = localStorage.getItem(this.id + &#x27;.&#x27; + key);
        if (raw === null) return defaultValue;
        try {
            return this.decode(raw);
        }
        catch (e) {
            return raw;
        }
    },

    /**
        Check if a key is in local storage.
        @method has
        @param {String} key
        @return {Boolean}
    **/
    has: function(key) {
        return localStorage.getItem(this.id + &#x27;.&#x27; + key) !== null;
    },

    /**
        Remove key from local storage.
        @method remove
        @param {String} key
    **/
    remove: function(key) {
        localStorage.removeItem(this.id + &#x27;.&#x27; + key);
    },

    /**
        Reset local storage. This removes ALL keys.
        @method reset
    **/
    reset: function() {
        for (var i = localStorage.length - 1; i &gt;= 0; i--) {
            var key = localStorage.key(i);
            if (key.indexOf(this.id + &#x27;.&#x27;) !== -1) localStorage.removeItem(key);
        }
    },

    encode: function(val) {
        return JSON.stringify(val);
    },

    decode: function(str) {
        return JSON.parse(str);
    }
});

game.addAttributes(&#x27;Storage&#x27;, {
    /**
        @attribute {String} id
    **/
    id: &#x27;&#x27;
});

});

    </pre>
</div>

---
layout: default
title: Documentation <span>1.9.0</span>
---

<div class="sidebar"></div>

<h1 class="file-heading">File: src/engine/analytics.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
    @module analytics
    @namespace game
**/
game.module(
    &#x27;engine.analytics&#x27;
)
.body(function() {
&#x27;use strict&#x27;;

/**
    Google Analytics tracking.
    @class Analytics
    @extends game.Class
    @constructor
    @param {String} id
**/
game.Analytics = game.Class.extend({
    /**
        Is analytics enabled.
        @property {Boolean} enabled
    **/
    enabled: true,
    /**
        Current tracking id.
        @property {String} trackId
    **/
    trackId: null,
    userId: null,

    init: function(id) {
        if (!navigator.onLine || game.device.cocoonJS &amp;&amp; !game.Analytics.cocoonJS) {
            this.enabled = false;
            return;
        }

        this.trackId = id;

        if (game.device.cocoonJS &amp;&amp; game.Analytics.cocoonJS) {
            this.userId = Date.now();
            var request = new XMLHttpRequest();
            var params = &#x27;v=1&amp;tid=&#x27; + this.trackId + &#x27;&amp;cid=&#x27; + this.userId + &#x27;&amp;t=pageview&amp;dp=%2F&#x27;;
            request.open(&#x27;POST&#x27;, &#x27;http://www.google-analytics.com/collect&#x27;, true);
            request.send(params);
        }
        else {
            (function(i, s, o, g, r, a, m) {
                i[&#x27;GoogleAnalyticsObject&#x27;] = r;
                i[r] = i[r] || function() {
                    (i[r].q = i[r].q || []).push(arguments)
                };
                i[r].l = 1 * new Date();
                a = s.createElement(o);
                m = s.getElementsByTagName(o)[0];
                a.async = 1;
                a.src = g;
                m.parentNode.insertBefore(a, m);
            })(window, document, &#x27;script&#x27;, &#x27;//www.google-analytics.com/analytics.js&#x27;, &#x27;ga&#x27;);

            ga(&#x27;create&#x27;, id, &#x27;auto&#x27;);
            ga(&#x27;send&#x27;, &#x27;pageview&#x27;);
        }
    },

    /**
        Send event to analytics.
        @method send
        @param {String} category
        @param {String} action
        @param {String} [label]
        @param {String} [value]
    **/
    send: function(category, action, label, value) {
        if (!this.enabled) return;

        if (game.device.cocoonJS &amp;&amp; game.Analytics.cocoonJS) {
            var request = new XMLHttpRequest();
            var params = &#x27;v=1&amp;tid=&#x27; + this.trackId + &#x27;&amp;cid=&#x27; + this.userId + &#x27;&amp;t=event&amp;ec=&#x27; + category + &#x27;&amp;ea=&#x27; + action;
            if (typeof label !== &#x27;undefined&#x27;) params += &#x27;&amp;el=&#x27; + label;
            if (typeof value !== &#x27;undefined&#x27;) params += &#x27;&amp;ev=&#x27; + value;
            request.open(&#x27;POST&#x27;, &#x27;http://www.google-analytics.com/collect&#x27;, true);
            request.send(params);
        }
        else {
            ga(&#x27;send&#x27;, &#x27;event&#x27;, category, action, label, value);
        }
    }
});

/**
    Tracking id for analytics.
    @attribute {String} id
**/
game.Analytics.id = &#x27;&#x27;;

/**
    Enable analytics on CocoonJS.
    @attribute {Boolean} cocoonJS
    @default false
**/
game.Analytics.cocoonJS = false;

});

    </pre>
</div>


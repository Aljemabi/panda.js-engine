---
layout: default
title: Tutorials
---
<h3>Making Flappy Bird clone with Panda.js - Part 1</h3>

<h4>1. Loading assets</h4>

<p>First, load all assets from here. Unzip and copy content into the <b>media</b> folder.</p>

<p>Open <b>game/assets.js</b>. First we will load all our image files with this code:</p>

<div class="file">game/assets.js</div>
<pre name="code" class="js:nocontrols:nogutter">
game.addAsset('media/player.png');
game.addAsset('media/logo2.png');
game.addAsset('media/logo1.png');
game.addAsset('media/cloud4.png');
game.addAsset('media/cloud3.png');
game.addAsset('media/cloud2.png');
game.addAsset('media/cloud1.png');
game.addAsset('media/ground.png');
game.addAsset('media/bushes.png');
game.addAsset('media/parallax3.png');
game.addAsset('media/parallax2.png');
game.addAsset('media/parallax1.png');
game.addAsset('media/particle.png');
game.addAsset('media/particle2.png');
game.addAsset('media/bar.png');
game.addAsset('media/madewithpanda.png');
</pre>

<div class="hint">If your game has many image files, you can package them into one file and use sprite sheets.</div>

<p>Next, we will load our bitmap font:</p>

<div class="file">game/assets.js</div>
<pre name="code" class="js:nocontrols:nogutter">
game.addAsset('media/font.fnt');
</pre>

<p>And finally, load our sound effects and music:</p>

<div class="file">game/assets.js</div>
<pre name="code" class="js:nocontrols:nogutter">
game.addSound('media/sound/explosion.m4a', 'explosion');
game.addSound('media/sound/jump.m4a', 'jump');
game.addSound('media/sound/score.m4a', 'score');

game.addMusic('media/sound/music.m4a', 'music');
</pre>

<div class="hint">You should always use two audio formats, m4a and ogg. Panda will automatically load the right one.</div>

<p>Now our <b>game.assets</b> module should look like this:</p>

<div class="file">game/assets.js</div>
<pre name="code" class="js:nocontrols:nogutter">
game.module(
    'game.assets'
)
.require(
    'engine.sound'
)
.body(function() {

game.addAsset('media/player.png');
game.addAsset('media/logo2.png');
game.addAsset('media/logo1.png');
game.addAsset('media/cloud4.png');
game.addAsset('media/cloud3.png');
game.addAsset('media/cloud2.png');
game.addAsset('media/cloud1.png');
game.addAsset('media/ground.png');
game.addAsset('media/bushes.png');
game.addAsset('media/parallax3.png');
game.addAsset('media/parallax2.png');
game.addAsset('media/parallax1.png');
game.addAsset('media/particle.png');
game.addAsset('media/particle2.png');
game.addAsset('media/bar.png');
game.addAsset('media/madewithpanda.png');

game.addAsset('media/font.fnt');

game.addSound('media/sound/explosion.m4a', 'explosion');
game.addSound('media/sound/jump.m4a', 'jump');
game.addSound('media/sound/score.m4a', 'score');

game.addMusic('media/sound/music.m4a', 'music');

});
</pre>

<h4>2. Creating main scene</h4>

<p>Our game will only have one scene, Panda will by default load scene named <b>SceneTitle</b>. So we will call it that.</p>

<p>Let's start by extending the scene from <b>game.Scene</b> class. Type this into <b>game.scenes</b> module:</p>

<div class="file">game/scenes.js</div>
<pre name="code" class="js:nocontrols:nogutter">
SceneTitle = game.Scene.extend({
});
</pre>

<div class="hint">Module name is also path to the JavaScript file. Example, game.scenes module is located at game/scenes.js</div>

Define background color and init function:

<div class="file">game/scenes.js</div>
<pre name="code" class="js:nocontrols:nogutter">
SceneTitle = game.Scene.extend({
    backgroundColor: 0xb2dcef,

    init: function() {

    }
});
</pre>

<p>Next we will define function for our parallax layers:</p>

<div class="file">game/scenes.js</div>
<pre name="code" class="js:nocontrols:nogutter">
addParallax: function(y, path, speed) {
    var parallax = new game.TilingSprite(0, y, path);
    parallax.speed.x = speed;
    this.addObject(parallax);
    this.stage.addChild(parallax);
}
</pre>

<p>The function will take three parameters:</p>
<p><b>y</b> is the position of the layer from top.</p>

<p><b>path</b> is path to the image file.</p>
<p><b>speed</b> is the scrolling speed of the layer.</p>

<p>Now we can add some parallax layers to the <b>init</b> function:</p>

<div class="file">game/scenes.js</div>
<pre name="code" class="js:nocontrols:nogutter">
init: function() {
    this.addParallax(400, 'media/parallax1.png', -50);
    this.addParallax(550, 'media/parallax2.png', -100);
    this.addParallax(650, 'media/parallax3.png', -200);
}
</pre>

<p>Your scene should now look like this:</p>

<div class="file">game/scenes.js</div>
<pre name="code" class="js:nocontrols:nogutter">
SceneTitle = game.Scene.extend({  
    backgroundColor: 0xb2dcef,  
  
    init: function() {  
        this.addParallax(400, 'media/parallax1.png', -50);  
        this.addParallax(550, 'media/parallax2.png', -100);  
        this.addParallax(650, 'media/parallax3.png', -200);  
    },

    addParallax: function(y, path, speed) {  
        var parallax = new game.TilingSprite(0, y, path);  
        parallax.speed.x = speed;  
        this.addObject(parallax);  
        this.stage.addChild(parallax);  
    }
});  
</pre>

<p>Try to start the game now. You should see three parallax layers moving at different speeds:</p>

<img src="flappybird1.png" class="screenshot">

<p>Add two more parallax layers:</p>

<div class="file">game/scenes.js</div>
<pre name="code" class="js:nocontrols:nogutter">
this.addParallax(700, 'media/bushes.png', -250);
this.addParallax(800, 'media/ground.png', -300);
</pre>

<h4>3. Creating player object</h4>

<p>Now move to the <b>game.objects</b> module. Start by extending new class named <b>Player</b></p>

<div class="file">game/objects.js</div>
<pre name="code" class="js:nocontrols:nogutter">
Player = game.Class.extend({
    init: function() {

    }
});
</pre>

<p>Let's give our player a sprite, add this to <b>init</b> function:</p>

<div class="file">game/objects.js</div>
<pre name="code" class="js:nocontrols:nogutter">
var x = game.system.width / 2;
var y = 500;
this.sprite = new game.Sprite(x, y, 'media/player.png', {anchor: {x:0.5, y:0.5}});
</pre>

<div class="hint">You can use variables game.system.width and game.system.height to get canvas dimensions.</div>

<p>Notice how we changed the sprite anchor to <b>0.5</b>. Now the sprite position is the center of the image.</p>

<p>Then add the sprite to stage:</p>

<div class="file">game/objects.js</div>
<pre name="code" class="js:nocontrols:nogutter">
game.scene.stage.addChild(this.sprite);
</pre>

<div class="hint">game.scene is always the current running game.Scene class</div>

<p>Your <b>game.objects</b> module should now look like this:</p>

<div class="file">game/objects.js</div>
<pre name="code" class="js:nocontrols:nogutter">
game.module(
    'game.objects'
)
.require(
    'engine.sprite'
)
.body(function() {
    Player = game.Class.extend({
        init: function() {
            var x = game.system.width / 2;
            var y = 500;
            this.sprite = new game.Sprite(x, y, 'media/player.png', {anchor: {x:0.5, y:0.5}});
            game.scene.stage.addChild(this.sprite);
        }
    });
});
</pre>

<p>Now we can add our new <b>Player</b> class to the scene:</p>

<div class="file">game/scenes.js</div>
<pre name="code" class="js:nocontrols:nogutter">
init: function() {  
    this.addParallax(400, 'media/parallax1.png', -50);  
    this.addParallax(550, 'media/parallax2.png', -100);  
    this.addParallax(650, 'media/parallax3.png', -200);
    this.addParallax(700, 'media/bushes.png', -250);
    this.addParallax(800, 'media/ground.png', -300);

    this.player = new Player();
},
</pre>

<p>You should see player sprite flying in the center:</p>

<img src="flappybird2.png" class="screenshot">
